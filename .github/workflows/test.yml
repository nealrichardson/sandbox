name: Test

on: [push]


jobs:
    test:
      runs-on: ubuntu-latest
      env:

        TOP_SECRET: ${{ secrets.TOP_SECRET }}
        TOP_SECRET_FILE: ${{ secrets.TOP_SECRET_FILE }}
      steps:
        - uses: actions/checkout@v4

        - name: Write file
          run: echo ${TOP_SECRET} > ./copy.txt
        
        - name: Test
          run: 
            # cat "$TOP_SECRET_FILE" | true
            cat test.txt
            ls -lh .
            # ls -lh "$TOP_SECRET_FILE" | true
        
        - name: Run docker compose
          run: docker compose up
        
        - name: Check results
          run: 
            cat test.txt
            cat outside.txt
            ls -lh .

