name: Test

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: See what we have, set an env var
      run: |
        set -x
        whoami
        sudo bash
        whoami
        echo Hello, world!
        pwd
        ls -alh
        VAR1=foo
        echo "var1 is $VAR1"
        echo "::set-env name=VAR1::${VAR1}"
        mkdir bang
        # ! gets escaped so !$ doesn't work
        # cd !$
        cd bang
        pwd
    - name: See what remains
      run: |
        set -x
        echo Step 2
        pwd
        # cd not preserved
        ls
        # but the dir created is
        echo "var1 is $VAR1"
